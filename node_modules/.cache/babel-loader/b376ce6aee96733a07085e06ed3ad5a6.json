{"remainingRequest":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js!/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daocloud_j/git/loderunner-vue-front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daocloud_j/git/loderunner-vue-front/src/views/Login.vue","mtime":1591819548000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAidmFudC9lcy90b2FzdC9zdHlsZSI7CmltcG9ydCBfVG9hc3QgZnJvbSAidmFudC9lcy90b2FzdCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHNIZWFkZXIgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZUhlYWRlcic7CmltcG9ydCB7IGxvZ2luLCByZWdpc3RlciwgZ2V0VXNlckluZm8gfSBmcm9tICcuLi9zZXJ2aWNlL3VzZXInOwppbXBvcnQgeyBzZXRMb2NhbCwgZ2V0TG9jYWwgfSBmcm9tICdAL2NvbW1vbi9qcy91dGlscyc7CmltcG9ydCBWZXJpZnkgZnJvbSAndnVlMi12ZXJpZnknOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICB1c2VybmFtZTE6ICcnLAogICAgICBwYXNzd29yZDE6ICcnLAogICAgICB0eXBlOiAnbG9naW4nLAogICAgICB2ZXJpZnk6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgc0hlYWRlcjogc0hlYWRlciwKICAgIFZlcmlmeTogVmVyaWZ5CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWFsVHJpVmVyOiBmdW5jdGlvbiBkZWFsVHJpVmVyKCkgewogICAgICB0aGlzLiRyZWZzLmxvZ2luVmVyaWZ5UmVmLiRyZWZzLmluc3RhbmNlLmNoZWNrQ29kZSgpOwogICAgfSwKICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKHYpIHsKICAgICAgdGhpcy52ZXJpZnkgPSBmYWxzZTsKICAgICAgdGhpcy50eXBlID0gdjsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzKSB7CiAgICAgIHZhciBfcmVmLCBkYXRhLCByZXN1bHRDb2RlLCBfcmVmMiwgX2RhdGE7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIG9uU3VibWl0JChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0aGlzLmRlYWxUcmlWZXIoKTsKCiAgICAgICAgICAgICAgaWYgKHRoaXMudmVyaWZ5KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX1RvYXN0LmZhaWwoJ+mqjOivgeeggeacquWhq+aIluWhq+WGmemUmeivryEnKTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgaWYgKCEodGhpcy50eXBlID09ICdsb2dpbicpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAobG9naW4oewogICAgICAgICAgICAgICAgImxvZ2luTmFtZSI6IHZhbHVlcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICJwYXNzd29yZE1kNSI6IHRoaXMuJG1kNSh2YWx1ZXMucGFzc3dvcmQpCiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9yZWYgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgICAgICAgICAgcmVzdWx0Q29kZSA9IF9yZWYucmVzdWx0Q29kZTsKICAgICAgICAgICAgICBzZXRMb2NhbCgndG9rZW4nLCBkYXRhKTsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJzsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHJlZ2lzdGVyKHsKICAgICAgICAgICAgICAgICJsb2dpbk5hbWUiOiB2YWx1ZXMudXNlcm5hbWUxLAogICAgICAgICAgICAgICAgInBhc3N3b3JkIjogdmFsdWVzLnBhc3N3b3JkMQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgX3JlZjIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9kYXRhID0gX3JlZjIuZGF0YTsKCiAgICAgICAgICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+azqOWGjOaIkOWKnycpOwoKICAgICAgICAgICAgICB0aGlzLnR5cGUgPSAnbG9naW4nOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhvYmopIHsKICAgICAgdGhpcy52ZXJpZnkgPSB0cnVlOyAvLyDlm57osIPkuYvlkI7vvIzliLfmlrDpqozor4HnoIEKCiAgICAgIG9iai5yZWZyZXNoKCk7CiAgICB9LAogICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKG9iaikgewogICAgICB0aGlzLnZlcmlmeSA9IGZhbHNlOyAvLyDlm57osIPkuYvlkI7vvIzliLfmlrDpqozor4HnoIEKCiAgICAgIG9iai5yZWZyZXNoKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,OAAA,OAAA,MAAA,2BAAA;AACA,SAAA,KAAA,EAAA,QAAA,EAAA,WAAA,QAAA,iBAAA;AACA,SAAA,QAAA,EAAA,QAAA,QAAA,mBAAA;AAEA,OAAA,MAAA,MAAA,aAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA,EAJA;AAKA,MAAA,IAAA,EAAA,OALA;AAMA,MAAA,MAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,MAAA,EAAA;AAFA,GAXA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,KAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,CAAA,SAAA;AACA,KAHA;AAIA,IAAA,MAJA,kBAIA,CAJA,EAIA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,WAAA,IAAA,GAAA,CAAA;AACA,KAPA;AAQA,IAAA,QARA,oBAQA,MARA;AAAA;;AAAA;AAAA;AAAA;AAAA;AASA,mBAAA,UAAA;;AATA,kBAUA,KAAA,MAVA;AAAA;AAAA;AAAA;;AAWA,qBAAA,IAAA,CAAA,aAAA;;AAXA;;AAAA;AAAA,oBAcA,KAAA,IAAA,IAAA,OAdA;AAAA;AAAA;AAAA;;AAAA;AAAA,8CAeA,KAAA,CAAA;AACA,6BAAA,MAAA,CAAA,QADA;AAEA,+BAAA,KAAA,IAAA,CAAA,MAAA,CAAA,QAAA;AAFA,eAAA,CAfA;;AAAA;AAAA;AAeA,cAAA,IAfA,QAeA,IAfA;AAeA,cAAA,UAfA,QAeA,UAfA;AAmBA,cAAA,QAAA,CAAA,OAAA,EAAA,IAAA,CAAA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,GAAA;AApBA;AAAA;;AAAA;AAAA;AAAA,8CAsBA,QAAA,CAAA;AACA,6BAAA,MAAA,CAAA,SADA;AAEA,4BAAA,MAAA,CAAA;AAFA,eAAA,CAtBA;;AAAA;AAAA;AAsBA,cAAA,KAtBA,SAsBA,IAtBA;;AA0BA,qBAAA,OAAA,CAAA,MAAA;;AACA,mBAAA,IAAA,GAAA,OAAA;;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8BA,IAAA,OA9BA,mBA8BA,GA9BA,EA8BA;AACA,WAAA,MAAA,GAAA,IAAA,CADA,CAEA;;AACA,MAAA,GAAA,CAAA,OAAA;AACA,KAlCA;AAmCA,IAAA,KAnCA,iBAmCA,GAnCA,EAmCA;AACA,WAAA,MAAA,GAAA,KAAA,CADA,CAEA;;AACA,MAAA,GAAA,CAAA,OAAA;AACA;AAvCA;AAfA,CAAA","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"login\">\n    <s-header :name=\"type == 'login' ? '登录' : '注册'\" :back=\"'/home'\"></s-header>\n    <img class=\"logo\" src=\"//s.weituibao.com/1582958061265/mlogo.png\" alt=\"\">\n    <div v-if=\"type == 'login'\" class=\"login-body login\">\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username\"\n          name=\"username\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div class=\"verify\">\n          <Verify ref=\"loginVerifyRef\" @error=\"error\" :showButton=\"false\" @success=\"success\" :width=\"'100%'\" :height=\"'40px'\" :fontSize=\"'16px'\" :type=\"2\"></Verify>\n        </div>\n        <div style=\"margin: 16px;\">\n          <div class=\"link-register\" @click=\"toggle('register')\">立即注册</div>\n          <van-button round block type=\"info\" color=\"#1baeae\" native-type=\"submit\">登录</van-button>\n        </div>\n      </van-form>\n    </div>\n    <div v-else class=\"login-body register\">\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username1\"\n          name=\"username1\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password1\"\n          type=\"password\"\n          name=\"password1\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div class=\"verify\">\n          <Verify ref=\"loginVerifyRef\" @error=\"error\" :showButton=\"false\" @success=\"success\" :width=\"'100%'\" :height=\"'40px'\" :fontSize=\"'16px'\" :type=\"2\"></Verify>\n        </div>\n        <div style=\"margin: 16px;\">\n          <div class=\"link-login\" @click=\"toggle('login')\">已有登录账号</div>\n          <van-button round block type=\"info\" color=\"#1baeae\" native-type=\"submit\">注册</van-button>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport sHeader from '@/components/SimpleHeader'\nimport { login, register, getUserInfo } from '../service/user'\nimport { setLocal, getLocal } from '@/common/js/utils'\nimport { Toast } from 'vant'\nimport Verify from 'vue2-verify'\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      username1: '',\n      password1: '',\n      type: 'login',\n      verify: false\n    }\n  },\n  components: {\n    sHeader,\n    Verify\n  },\n  methods: {\n    dealTriVer() {\n      this.$refs.loginVerifyRef.$refs.instance.checkCode()\n    },\n    toggle(v) {\n      this.verify = false\n      this.type = v\n    },\n    async onSubmit(values) {\n      this.dealTriVer()\n      if (!this.verify) {\n        Toast.fail('验证码未填或填写错误!')\n        return\n      }\n      if (this.type == 'login') {\n        const { data, resultCode } = await login({\n          \"loginName\": values.username,\n          \"passwordMd5\": this.$md5(values.password)\n        })\n        setLocal('token', data)\n        window.location.href = '/'\n      } else {\n        const { data } = await register({\n          \"loginName\": values.username1,\n          \"password\": values.password1\n        })\n        Toast.success('注册成功')\n        this.type = 'login'\n      }\n    },\n    success(obj) {\n      this.verify = true\n      // 回调之后，刷新验证码\n      obj.refresh()\n    },\n    error(obj) {\n      this.verify = false\n      // 回调之后，刷新验证码\n      obj.refresh()\n    }\n  },\n}\n</script>\n\n<style lang=\"less\">\n  .login {\n    .logo {\n      width: 120px;\n      height: 120px;\n      display: block;\n      margin: 80px auto 0px;\n    }\n    .login-body {\n      padding: 0 20px;\n    }\n    .login {\n      .link-register {\n        font-size: 14px;\n        margin-bottom: 20px;\n        color: #1989fa;\n        display: inline-block;\n      }\n    }\n    .register {\n      .link-login {\n        font-size: 14px;\n        margin-bottom: 20px;\n        color: #1989fa;\n        display: inline-block;\n      }\n    }\n    .verify-bar-area {\n      margin-top: 24px;\n      .verify-left-bar {\n        border-color: #1baeae;\n      }\n      .verify-move-block {\n        background-color: #1baeae;\n        color: #fff;\n      }\n    }\n    .verify {\n      >div {\n        width: 100%;\n      }\n      display: flex;\n      justify-content: center;\n      .cerify-code-panel {\n        margin-top: 16px;\n      }\n      .verify-code {\n        width: 40%!important;\n        float: left!important;\n      }\n      .verify-code-area {\n        float: left!important;\n        width: 54%!important;\n        margin-left: 14px!important;\n        .varify-input-code {\n          width: 90px;\n          height: 38px!important;\n          border: 1px solid #e9e9e9;\n          padding-left: 10px;\n          font-size: 16px;\n        }\n        .verify-change-area {\n          line-height: 44px;\n        }\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/views"}]}
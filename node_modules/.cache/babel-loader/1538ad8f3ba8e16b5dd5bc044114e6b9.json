{"remainingRequest":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js!/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daocloud_j/git/loderunner-vue-front/src/views/ProductList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daocloud_j/git/loderunner-vue-front/src/views/ProductList.vue","mtime":1591819548000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0UXVlcnlTdHJpbmcgfSBmcm9tICdAL2NvbW1vbi9qcy91dGlscyc7CmltcG9ydCB7IHNlYXJjaCB9IGZyb20gJy4uL3NlcnZpY2UvZ29vZCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZDogdGhpcy4kcm91dGUucXVlcnkua2V5d29yZCB8fCAnJywKICAgICAgc2VhcmNoQnRuOiBmYWxzZSwKICAgICAgc2VjbGVjdEFjdGl2ZTogZmFsc2UsCiAgICAgIHJlZnJlc2hpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcHJvZHVjdExpc3Q6IFtdLAogICAgICB0b3RhbFBhZ2U6IDAsCiAgICAgIHBhZ2U6IDEsCiAgICAgIG9yZGVyQnk6ICcnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5wYWdlU2Nyb2xsKQogICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAvLyAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgLy8gfSwgNTAwKQogICAgLy8gdGhpcy5pbml0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyQkcm91dGUkcXVlcnksIGNhdGVnb3J5SWQsIGZyb20sIF9yZWYsIGRhdGEsIGxpc3Q7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGluaXQkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJCRyb3V0ZSRxdWVyeSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LCBjYXRlZ29yeUlkID0gX3RoaXMkJHJvdXRlJHF1ZXJ5LmNhdGVnb3J5SWQsIGZyb20gPSBfdGhpcyQkcm91dGUkcXVlcnkuZnJvbTsKCiAgICAgICAgICAgICAgaWYgKCEoIWNhdGVnb3J5SWQgJiYgIXRoaXMua2V5d29yZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBUb2FzdC5mYWlsKCfor7fovpPlhaXlhbPplK7or40nKQogICAgICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2VhcmNoKHsKICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXI6IHRoaXMucGFnZSwKICAgICAgICAgICAgICAgIGdvb2RzQ2F0ZWdvcnlJZDogY2F0ZWdvcnlJZCwKICAgICAgICAgICAgICAgIGtleXdvcmQ6IHRoaXMua2V5d29yZCwKICAgICAgICAgICAgICAgIG9yZGVyQnk6IHRoaXMub3JkZXJCeQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfcmVmID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgICAgICAgIGxpc3QgPSBfcmVmLmRhdGEubGlzdDsKICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gdGhpcy5wcm9kdWN0TGlzdC5jb25jYXQobGlzdCk7CiAgICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2UgPSBkYXRhLnRvdGFsUGFnZTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAodGhpcy5wYWdlID49IGRhdGEudG90YWxQYWdlKSB0aGlzLmZpbmlzaGVkID0gdHJ1ZTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfSwKICAgIGdvQmFjazogZnVuY3Rpb24gZ29CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgfSwKICAgIHByb2R1Y3REZXRhaWw6IGZ1bmN0aW9uIHByb2R1Y3REZXRhaWwoaXRlbSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogInByb2R1Y3QvIi5jb25jYXQoaXRlbS5nb29kc0lkKQogICAgICB9KTsKICAgIH0sCiAgICB0ZXh0RW50ZXI6IGZ1bmN0aW9uIHRleHRFbnRlcigpIHt9LAogICAgdGV4dExlYXZlOiBmdW5jdGlvbiB0ZXh0TGVhdmUoKSB7fSwKICAgIGdldFNlYXJjaDogZnVuY3Rpb24gZ2V0U2VhcmNoKCkgewogICAgICB0aGlzLm9uUmVmcmVzaCgpOwogICAgfSwKICAgIHBhZ2VTY3JvbGw6IGZ1bmN0aW9uIHBhZ2VTY3JvbGwoKSB7CiAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgc2Nyb2xsVG9wID4gNTAgPyB0aGlzLnNlY2xlY3RBY3RpdmUgPSB0cnVlIDogdGhpcy5zZWNsZWN0QWN0aXZlID0gZmFsc2U7CiAgICB9LAogICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgIGlmICghdGhpcy5yZWZyZXNoaW5nICYmIHRoaXMucGFnZSA8IHRoaXMudG90YWxQYWdlKSB7CiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5wYWdlICsgMTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVmcmVzaGluZykgewogICAgICAgIHRoaXMucHJvZHVjdExpc3QgPSBbXTsKICAgICAgICB0aGlzLnJlZnJlc2hpbmcgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0KCk7CiAgICB9LAogICAgb25SZWZyZXNoOiBmdW5jdGlvbiBvblJlZnJlc2goKSB7CiAgICAgIHRoaXMucmVmcmVzaGluZyA9IHRydWU7CiAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5vbkxvYWQoKTsKICAgIH0sCiAgICBjaGFuZ2VUYWI6IGZ1bmN0aW9uIGNoYW5nZVRhYihuYW1lLCB0aXRsZSkgewogICAgICB0aGlzLm9yZGVyQnkgPSBuYW1lOwogICAgICB0aGlzLm9uUmVmcmVzaCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ProductList.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"product-list-wrap\">\n    <div class=\"product-list-content\">\n      <header class=\"category-header wrap\">\n        <i class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n        <div class=\"header-search\">\n          <i class=\"nbicon nbSearch\"></i>\n          <input\n            type=\"text\"\n            class=\"search-title\"\n            @mouseenter=\"textEnter\"\n            @mouseleave=\"textLeave\"\n            v-model=\"keyword\"/>\n        </div>\n        <span class=\"search-btn\" @click=\"getSearch\">搜索</span>\n      </header>\n      <van-tabs type=\"card\" color=\"#1baeae\" @click=\"changeTab\" >\n        <van-tab title=\"推荐\" name=\"\"></van-tab>\n        <van-tab title=\"新品\" name=\"new\"></van-tab>\n        <van-tab title=\"价格\" name=\"price\"></van-tab>\n      </van-tabs>\n    </div>\n    <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"product-list-refresh\">\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n        @offset=\"300\"\n      >\n        <!-- <p v-for=\"item in list\" :key=\"item\">{{ item }}</p> -->\n        <div class=\"product-item\" v-for=\"(item, index) in productList\" :key=\"index\" @click=\"productDetail(item)\">\n          <img :src=\"`//api.newbee.ltd${item.goodsCoverImg}`\" />\n          <div class=\"product-info\">\n            <p class=\"name\">{{item.goodsName}}</p>\n            <p class=\"subtitle\">{{item.goodsIntro}}</p>\n            <span class=\"price\">￥ {{item.sellingPrice}}</span>\n          </div>\n        </div>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport { getQueryString } from '@/common/js/utils'\nimport { search } from '../service/good'\nimport { Toast } from 'vant'\nexport default {\n  data() {\n    return {\n      keyword: this.$route.query.keyword || '',\n      searchBtn: false,\n      seclectActive: false,\n      refreshing: false,\n      list: [],\n      loading: false,\n      finished: false,\n      productList: [],\n      totalPage: 0,\n      page: 1,\n      orderBy: ''\n    }\n  },\n  mounted() {\n    // window.addEventListener('scroll', this.pageScroll)\n    // setTimeout(() => {\n    //     this.isLoading = false\n    // }, 500)\n    // this.init()\n  },\n  methods: {\n    async init() {\n      const { categoryId, from } = this.$route.query\n      if (!categoryId && !this.keyword) {\n        // Toast.fail('请输入关键词')\n        this.finished = true\n        this.loading = false;\n        return\n      }\n      const { data, data: { list } } = await search({ pageNumber: this.page, goodsCategoryId: categoryId, keyword: this.keyword, orderBy: this.orderBy })\n      this.productList = this.productList.concat(list)\n      this.totalPage = data.totalPage\n      this.loading = false;\n      if (this.page >= data.totalPage) this.finished = true\n    },\n    goBack() {\n      this.$router.go(-1)\n    },\n    productDetail(item) {\n      this.$router.push({ path: `product/${item.goodsId}` })\n    },\n    textEnter() {\n\n    },\n    textLeave() {\n\n    },\n    getSearch() {\n      this.onRefresh()\n    },\n    pageScroll() {\n      let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\n      scrollTop > 50 ? this.seclectActive = true : this.seclectActive = false\n    },\n    onLoad() {\n      if (!this.refreshing && this.page < this.totalPage) {\n        this.page = this.page + 1\n      }\n      if (this.refreshing) {\n        this.productList = [];\n        this.refreshing = false;\n      }\n      this.init()\n    },\n    onRefresh() {\n      this.refreshing = true\n      this.finished = false\n      this.loading = true\n      this.page = 1\n      this.onLoad()\n    },\n    changeTab(name, title) {\n      this.orderBy = name\n      this.onRefresh()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .product-list-content {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    z-index: 1000;\n    background: #fff;\n    .category-header {\n      .fj();\n      width: 100%;\n      height: 50px;\n      line-height: 50px;\n      padding: 0 15px;\n      .boxSizing();\n      font-size: 15px;\n      color: #656771;\n      z-index: 10000;\n      &.active {\n        background: @primary;\n      }\n      .icon-left {\n        font-size: 25px;\n        font-weight: bold;\n      }\n      .header-search {\n        display: flex;\n        width: 76%;\n        height: 20px;\n        line-height: 20px;\n        margin: 10px 0;\n        padding: 5px 0;\n        color: #232326;\n        background: #F7F7F7;\n        .borderRadius(20px);\n        .nbSearch {\n          padding: 0 5px 0 20px;\n          font-size: 17px;\n        }\n        .search-title {\n          font-size: 12px;\n          color: #666;\n          background: #F7F7F7;\n        }\n    }\n    .icon-More {\n      font-size: 20px;\n    }\n    .search-btn {\n      height: 28px;\n      margin: 8px 0;\n      line-height: 28px;\n      padding: 0 5px;\n      color: #fff;\n      background: @primary;\n      .borderRadius(5px);\n      margin-top: 10px;\n    }\n  }\n}\n  .product-list-refresh {\n    margin-top: 78px;\n    .product-item {\n      .fj();\n      width: 100%;\n      height: 120px;\n      padding: 10px 0;\n      border-bottom: 1px solid #dcdcdc;\n      img {\n        width: 140px;\n        height: 120px;\n        padding: 0 10px;\n        .boxSizing();\n      }\n      .product-info {\n          width: 56%;\n          height: 120px;\n          padding: 5px;\n          text-align: left;\n          .boxSizing();\n          p {\n            margin: 0\n          }\n          .name {\n            width: 100%;\n            max-height: 40px;\n            line-height: 20px;\n            font-size: 15px;\n            color: #333;\n            overflow: hidden;\n            text-overflow:ellipsis;\n            white-space: nowrap;\n          }\n          .subtitle {\n            width: 100%;\n            max-height: 20px;\n            padding: 10px 0;\n            line-height: 25px;\n            font-size: 13px;\n            color: #999;\n            overflow: hidden;\n          }\n          .price {\n            color: @primary;\n            font-size: 16px;\n          }\n      }\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}
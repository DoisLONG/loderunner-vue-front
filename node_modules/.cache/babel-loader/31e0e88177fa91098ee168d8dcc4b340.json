{"remainingRequest":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js!/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daocloud_j/git/loderunner-vue-front/src/views/OrderDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daocloud_j/git/loderunner-vue-front/src/views/OrderDetail.vue","mtime":1591819548000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAidmFudC9lcy9kaWFsb2cvc3R5bGUiOwppbXBvcnQgX0RpYWxvZyBmcm9tICJ2YW50L2VzL2RpYWxvZyI7CmltcG9ydCAidmFudC9lcy90b2FzdC9zdHlsZSI7CmltcG9ydCBfVG9hc3QgZnJvbSAidmFudC9lcy90b2FzdCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHNIZWFkZXIgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZUhlYWRlcic7CmltcG9ydCB7IGdldE9yZGVyRGV0YWlsLCBjYW5jZWxPcmRlciBhcyBfY2FuY2VsT3JkZXIsIGNvbmZpcm1PcmRlciBhcyBfY29uZmlybU9yZGVyLCBwYXlPcmRlciBhcyBfcGF5T3JkZXIgfSBmcm9tICcuLi9zZXJ2aWNlL29yZGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHNIZWFkZXI6IHNIZWFkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZXRhaWw6IHt9LAogICAgICBzaG93UGF5OiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBpZCwgX3JlZiwgZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaW5pdCQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX1RvYXN0LmxvYWRpbmcoewogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZ2V0T3JkZXJEZXRhaWwoaWQpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfcmVmID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gZGF0YTsKCiAgICAgICAgICAgICAgX1RvYXN0LmNsZWFyKCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfSwKICAgIGNhbmNlbE9yZGVyOiBmdW5jdGlvbiBjYW5jZWxPcmRlcihpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX0RpYWxvZy5jb25maXJtKHsKICAgICAgICB0aXRsZTogJ+ehruiupOWPlua2iOiuouWNle+8nycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX2NhbmNlbE9yZGVyKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMucmVzdWx0Q29kZSA9PSAyMDApIHsKICAgICAgICAgICAgX1RvYXN0KCfliKDpmaTmiJDlip8nKTsKCiAgICAgICAgICAgIF90aGlzLmluaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgey8vIG9uIGNhbmNlbAogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtT3JkZXI6IGZ1bmN0aW9uIGNvbmZpcm1PcmRlcihpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIF9EaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICfmmK/lkKbnoa7orqTorqLljZXvvJ8nCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF9jb25maXJtT3JkZXIoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5yZXN1bHRDb2RlID09IDIwMCkgewogICAgICAgICAgICBfVG9hc3QoJ+ehruiupOaIkOWKnycpOwoKICAgICAgICAgICAgX3RoaXMyLmluaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKCkgey8vIG9uIGNhbmNlbAogICAgICB9KTsKICAgIH0sCiAgICBzaG93UGF5Rm46IGZ1bmN0aW9uIHNob3dQYXlGbigpIHsKICAgICAgdGhpcy5zaG93UGF5ID0gdHJ1ZTsKICAgIH0sCiAgICBwYXlPcmRlcjogZnVuY3Rpb24gcGF5T3JkZXIoaWQsIHR5cGUpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBwYXlPcmRlciQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX1RvYXN0LmxvYWRpbmc7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoX3BheU9yZGVyKHsKICAgICAgICAgICAgICAgIG9yZGVyTm86IGlkLAogICAgICAgICAgICAgICAgcGF5VHlwZTogdHlwZQogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICB0aGlzLnNob3dQYXkgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmluaXQoKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgX0RpYWxvZy5jbG9zZSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["OrderDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA,OAAA,OAAA,MAAA,2BAAA;AACA,SAAA,cAAA,EAAA,WAAA,IAAA,YAAA,EAAA,YAAA,IAAA,aAAA,EAAA,QAAA,IAAA,SAAA,QAAA,kBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,IAAA;AAEA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,IADA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,OAAA,CAAA;AACA,gBAAA,OAAA,EAAA,QADA;AAEA,gBAAA,WAAA,EAAA;AAFA,eAAA;;AAIA,cAAA,EANA,GAMA,KAAA,MAAA,CAAA,KANA,CAMA,EANA;AAAA;AAAA,8CAOA,cAAA,CAAA,EAAA,CAPA;;AAAA;AAAA;AAOA,cAAA,IAPA,QAOA,IAPA;AAQA,mBAAA,MAAA,GAAA,IAAA;;AACA,qBAAA,KAAA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,IAAA,WAXA,uBAWA,EAXA,EAWA;AAAA;;AACA,cAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,EAEA,IAFA,CAEA,YAAA;AACA,QAAA,YAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,UAAA,IAAA,GAAA,EAAA;AACA,mBAAA,MAAA;;AACA,YAAA,KAAA,CAAA,IAAA;AACA;AACA,SALA;AAMA,OATA,WASA,YAAA,CACA;AACA,OAXA;AAYA,KAxBA;AAyBA,IAAA,YAzBA,wBAyBA,EAzBA,EAyBA;AAAA;;AACA,cAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,EAEA,IAFA,CAEA,YAAA;AACA,QAAA,aAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,UAAA,IAAA,GAAA,EAAA;AACA,mBAAA,MAAA;;AACA,YAAA,MAAA,CAAA,IAAA;AACA;AACA,SALA;AAMA,OATA,WASA,YAAA,CACA;AACA,OAXA;AAYA,KAtCA;AAuCA,IAAA,SAvCA,uBAuCA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KAzCA;AA0CA,IAAA,QA1CA,oBA0CA,EA1CA,EA0CA,IA1CA;AAAA;AAAA;AAAA;AAAA;AA2CA,qBAAA,OAAA;AA3CA;AAAA,8CA4CA,SAAA,CAAA;AAAA,gBAAA,OAAA,EAAA,EAAA;AAAA,gBAAA,OAAA,EAAA;AAAA,eAAA,CA5CA;;AAAA;AA6CA,mBAAA,OAAA,GAAA,KAAA;AACA,mBAAA,IAAA;;AA9CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgDA,IAAA,KAhDA,mBAgDA;AACA,cAAA,KAAA;AACA;AAlDA;AAdA,CAAA","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"order-detail-box\">\n    <s-header :name=\"'订单详情'\" @callback=\"close\"></s-header>\n    <div class=\"order-status\">\n      <div class=\"status-item\">\n        <label>订单状态：</label>\n        <span>{{ detail.orderStatusString }}</span>\n      </div>\n      <div class=\"status-item\">\n        <label>订单编号：</label>\n        <span>{{ detail.orderNo }}</span>\n      </div>\n      <div class=\"status-item\">\n        <label>下单时间：</label>\n        <span>{{ detail.createTime }}</span>\n      </div>\n      <!-- <van-button v-if=\"[1,2,3].includes(detail.orderStatus)\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block @click=\"confirmOrder(detail.orderNo)\">确认订单</van-button> -->\n      <van-button v-if=\"detail.orderStatus == 0\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block @click=\"showPayFn\">去支付</van-button>\n      <van-button v-if=\"!(detail.orderStatus < 0 || detail.orderStatus == 4)\" block @click=\"cancelOrder(detail.orderNo)\">取消订单</van-button>\n    </div>\n    <div class=\"order-price\">\n      <div class=\"price-item\">\n        <label>商品金额：</label>\n        <span>¥ {{ detail.totalPrice }}</span>\n      </div>\n      <div class=\"price-item\">\n        <label>配送方式：</label>\n        <span>普通快递</span>\n      </div>\n    </div>\n    <van-card\n      v-for=\"item in detail.newBeeMallOrderItemVOS\"\n      :key=\"item.goodsId\"\n      style=\"background: #fff\"\n      :num=\"item.goodsCount\"\n      :price=\"item.sellingPrice\"\n      desc=\"全场包邮\"\n      :title=\"item.goodsName\"\n      :thumb=\"`//api.newbee.ltd${item.goodsCoverImg}`\"\n    />\n    <van-popup\n      v-model=\"showPay\"\n      position=\"bottom\"\n      :style=\"{ height: '24%' }\"\n    >\n      <div :style=\"{ width: '90%', margin: '0 auto', padding: '20px 0' }\">\n        <van-button :style=\"{ marginBottom: '10px' }\" color=\"#1989fa\" block @click=\"payOrder(detail.orderNo, 1)\">支付宝支付</van-button>\n        <van-button color=\"#4fc08d\" block @click=\"payOrder(detail.orderNo, 2)\">微信支付</van-button>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport sHeader from '@/components/SimpleHeader'\nimport { getOrderDetail, cancelOrder, confirmOrder, payOrder } from '../service/order'\nimport { Dialog, Toast } from 'vant'\nexport default {\n  components: {\n    sHeader\n  },\n  data() {\n    return {\n      detail: {},\n      showPay: false\n    }\n  },\n  mounted() {\n    this.init()\n\n  },\n  methods: {\n    async init() {\n      Toast.loading({\n        message: '加载中...',\n        forbidClick: true\n      });\n      const { id } = this.$route.query\n      const { data } = await getOrderDetail(id)\n      this.detail = data\n      Toast.clear()\n    },\n    cancelOrder(id) {\n      Dialog.confirm({\n        title: '确认取消订单？',\n      }).then(() => {\n        cancelOrder(id).then(res => {\n          if (res.resultCode == 200) {\n            Toast('删除成功')\n            this.init()\n          }\n        })\n      }).catch(() => {\n        // on cancel\n      });\n    },\n    confirmOrder(id) {\n      Dialog.confirm({\n        title: '是否确认订单？',\n      }).then(() => {\n        confirmOrder(id).then(res => {\n          if (res.resultCode == 200) {\n            Toast('确认成功')\n            this.init()\n          }\n        })\n      }).catch(() => {\n        // on cancel\n      });\n    },\n    showPayFn() {\n      this.showPay = true\n    },\n    async payOrder(id, type) {\n      Toast.loading\n      await payOrder({ orderNo: id, payType: type })\n      this.showPay = false\n      this.init()\n    },\n    close() {\n      Dialog.close()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .order-detail-box {\n    background: #f7f7f7;\n    .order-status {\n      background: #fff;\n      margin-top: 44px;\n      padding: 20px;\n      font-size: 15px;\n      .status-item {\n        margin-bottom: 10px;\n        label {\n          color: #999;\n        }\n        span {\n\n        }\n      }\n    }\n    .order-price {\n      background: #fff;\n      margin: 20px 0;\n      padding: 20px;\n      font-size: 15px;\n      .price-item {\n        margin-bottom: 10px;\n        label {\n          color: #999;\n        }\n        span {\n\n        }\n      }\n    }\n    .van-card {\n      margin-top: 0;\n    }\n    .van-card__content {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n  }\n</style>\n"],"sourceRoot":"src/views"}]}
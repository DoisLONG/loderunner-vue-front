{"remainingRequest":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daocloud_j/git/loderunner-vue-front/src/views/ProductList.vue?vue&type=style&index=0&id=67a91b63&lang=less&scoped=true&","dependencies":[{"path":"/Users/daocloud_j/git/loderunner-vue-front/src/views/ProductList.vue","mtime":1591819548000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKICBAaW1wb3J0ICcuLi9jb21tb24vc3R5bGUvbWl4aW4nOwogIC5wcm9kdWN0LWxpc3QtY29udGVudCB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICBsZWZ0OiAwOwogICAgdG9wOiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICB6LWluZGV4OiAxMDAwOwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIC5jYXRlZ29yeS1oZWFkZXIgewogICAgICAuZmooKTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogNTBweDsKICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgICAgIHBhZGRpbmc6IDAgMTVweDsKICAgICAgLmJveFNpemluZygpOwogICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgIGNvbG9yOiAjNjU2NzcxOwogICAgICB6LWluZGV4OiAxMDAwMDsKICAgICAgJi5hY3RpdmUgewogICAgICAgIGJhY2tncm91bmQ6IEBwcmltYXJ5OwogICAgICB9CiAgICAgIC5pY29uLWxlZnQgewogICAgICAgIGZvbnQtc2l6ZTogMjVweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgfQogICAgICAuaGVhZGVyLXNlYXJjaCB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICB3aWR0aDogNzYlOwogICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgICAgICBtYXJnaW46IDEwcHggMDsKICAgICAgICBwYWRkaW5nOiA1cHggMDsKICAgICAgICBjb2xvcjogIzIzMjMyNjsKICAgICAgICBiYWNrZ3JvdW5kOiAjRjdGN0Y3OwogICAgICAgIC5ib3JkZXJSYWRpdXMoMjBweCk7CiAgICAgICAgLm5iU2VhcmNoIHsKICAgICAgICAgIHBhZGRpbmc6IDAgNXB4IDAgMjBweDsKICAgICAgICAgIGZvbnQtc2l6ZTogMTdweDsKICAgICAgICB9CiAgICAgICAgLnNlYXJjaC10aXRsZSB7CiAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgIGJhY2tncm91bmQ6ICNGN0Y3Rjc7CiAgICAgICAgfQogICAgfQogICAgLmljb24tTW9yZSB7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIH0KICAgIC5zZWFyY2gtYnRuIHsKICAgICAgaGVpZ2h0OiAyOHB4OwogICAgICBtYXJnaW46IDhweCAwOwogICAgICBsaW5lLWhlaWdodDogMjhweDsKICAgICAgcGFkZGluZzogMCA1cHg7CiAgICAgIGNvbG9yOiAjZmZmOwogICAgICBiYWNrZ3JvdW5kOiBAcHJpbWFyeTsKICAgICAgLmJvcmRlclJhZGl1cyg1cHgpOwogICAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgfQogIH0KfQogIC5wcm9kdWN0LWxpc3QtcmVmcmVzaCB7CiAgICBtYXJnaW4tdG9wOiA3OHB4OwogICAgLnByb2R1Y3QtaXRlbSB7CiAgICAgIC5maigpOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMjBweDsKICAgICAgcGFkZGluZzogMTBweCAwOwogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RjZGNkYzsKICAgICAgaW1nIHsKICAgICAgICB3aWR0aDogMTQwcHg7CiAgICAgICAgaGVpZ2h0OiAxMjBweDsKICAgICAgICBwYWRkaW5nOiAwIDEwcHg7CiAgICAgICAgLmJveFNpemluZygpOwogICAgICB9CiAgICAgIC5wcm9kdWN0LWluZm8gewogICAgICAgICAgd2lkdGg6IDU2JTsKICAgICAgICAgIGhlaWdodDogMTIwcHg7CiAgICAgICAgICBwYWRkaW5nOiA1cHg7CiAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgLmJveFNpemluZygpOwogICAgICAgICAgcCB7CiAgICAgICAgICAgIG1hcmdpbjogMAogICAgICAgICAgfQogICAgICAgICAgLm5hbWUgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgbWF4LWhlaWdodDogNDBweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgICB9CiAgICAgICAgICAuc3VidGl0bGUgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgbWF4LWhlaWdodDogMjBweDsKICAgICAgICAgICAgcGFkZGluZzogMTBweCAwOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMjVweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgICAgICBjb2xvcjogIzk5OTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgIH0KICAgICAgICAgIC5wcmljZSB7CiAgICAgICAgICAgIGNvbG9yOiBAcHJpbWFyeTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgfQogICAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ProductList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductList.vue","sourceRoot":"src/views","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"product-list-wrap\">\n    <div class=\"product-list-content\">\n      <header class=\"category-header wrap\">\n        <i class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n        <div class=\"header-search\">\n          <i class=\"nbicon nbSearch\"></i>\n          <input\n            type=\"text\"\n            class=\"search-title\"\n            @mouseenter=\"textEnter\"\n            @mouseleave=\"textLeave\"\n            v-model=\"keyword\"/>\n        </div>\n        <span class=\"search-btn\" @click=\"getSearch\">搜索</span>\n      </header>\n      <van-tabs type=\"card\" color=\"#1baeae\" @click=\"changeTab\" >\n        <van-tab title=\"推荐\" name=\"\"></van-tab>\n        <van-tab title=\"新品\" name=\"new\"></van-tab>\n        <van-tab title=\"价格\" name=\"price\"></van-tab>\n      </van-tabs>\n    </div>\n    <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"product-list-refresh\">\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n        @offset=\"300\"\n      >\n        <!-- <p v-for=\"item in list\" :key=\"item\">{{ item }}</p> -->\n        <div class=\"product-item\" v-for=\"(item, index) in productList\" :key=\"index\" @click=\"productDetail(item)\">\n          <img :src=\"`//api.newbee.ltd${item.goodsCoverImg}`\" />\n          <div class=\"product-info\">\n            <p class=\"name\">{{item.goodsName}}</p>\n            <p class=\"subtitle\">{{item.goodsIntro}}</p>\n            <span class=\"price\">￥ {{item.sellingPrice}}</span>\n          </div>\n        </div>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport { getQueryString } from '@/common/js/utils'\nimport { search } from '../service/good'\nimport { Toast } from 'vant'\nexport default {\n  data() {\n    return {\n      keyword: this.$route.query.keyword || '',\n      searchBtn: false,\n      seclectActive: false,\n      refreshing: false,\n      list: [],\n      loading: false,\n      finished: false,\n      productList: [],\n      totalPage: 0,\n      page: 1,\n      orderBy: ''\n    }\n  },\n  mounted() {\n    // window.addEventListener('scroll', this.pageScroll)\n    // setTimeout(() => {\n    //     this.isLoading = false\n    // }, 500)\n    // this.init()\n  },\n  methods: {\n    async init() {\n      const { categoryId, from } = this.$route.query\n      if (!categoryId && !this.keyword) {\n        // Toast.fail('请输入关键词')\n        this.finished = true\n        this.loading = false;\n        return\n      }\n      const { data, data: { list } } = await search({ pageNumber: this.page, goodsCategoryId: categoryId, keyword: this.keyword, orderBy: this.orderBy })\n      this.productList = this.productList.concat(list)\n      this.totalPage = data.totalPage\n      this.loading = false;\n      if (this.page >= data.totalPage) this.finished = true\n    },\n    goBack() {\n      this.$router.go(-1)\n    },\n    productDetail(item) {\n      this.$router.push({ path: `product/${item.goodsId}` })\n    },\n    textEnter() {\n\n    },\n    textLeave() {\n\n    },\n    getSearch() {\n      this.onRefresh()\n    },\n    pageScroll() {\n      let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\n      scrollTop > 50 ? this.seclectActive = true : this.seclectActive = false\n    },\n    onLoad() {\n      if (!this.refreshing && this.page < this.totalPage) {\n        this.page = this.page + 1\n      }\n      if (this.refreshing) {\n        this.productList = [];\n        this.refreshing = false;\n      }\n      this.init()\n    },\n    onRefresh() {\n      this.refreshing = true\n      this.finished = false\n      this.loading = true\n      this.page = 1\n      this.onLoad()\n    },\n    changeTab(name, title) {\n      this.orderBy = name\n      this.onRefresh()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .product-list-content {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    z-index: 1000;\n    background: #fff;\n    .category-header {\n      .fj();\n      width: 100%;\n      height: 50px;\n      line-height: 50px;\n      padding: 0 15px;\n      .boxSizing();\n      font-size: 15px;\n      color: #656771;\n      z-index: 10000;\n      &.active {\n        background: @primary;\n      }\n      .icon-left {\n        font-size: 25px;\n        font-weight: bold;\n      }\n      .header-search {\n        display: flex;\n        width: 76%;\n        height: 20px;\n        line-height: 20px;\n        margin: 10px 0;\n        padding: 5px 0;\n        color: #232326;\n        background: #F7F7F7;\n        .borderRadius(20px);\n        .nbSearch {\n          padding: 0 5px 0 20px;\n          font-size: 17px;\n        }\n        .search-title {\n          font-size: 12px;\n          color: #666;\n          background: #F7F7F7;\n        }\n    }\n    .icon-More {\n      font-size: 20px;\n    }\n    .search-btn {\n      height: 28px;\n      margin: 8px 0;\n      line-height: 28px;\n      padding: 0 5px;\n      color: #fff;\n      background: @primary;\n      .borderRadius(5px);\n      margin-top: 10px;\n    }\n  }\n}\n  .product-list-refresh {\n    margin-top: 78px;\n    .product-item {\n      .fj();\n      width: 100%;\n      height: 120px;\n      padding: 10px 0;\n      border-bottom: 1px solid #dcdcdc;\n      img {\n        width: 140px;\n        height: 120px;\n        padding: 0 10px;\n        .boxSizing();\n      }\n      .product-info {\n          width: 56%;\n          height: 120px;\n          padding: 5px;\n          text-align: left;\n          .boxSizing();\n          p {\n            margin: 0\n          }\n          .name {\n            width: 100%;\n            max-height: 40px;\n            line-height: 20px;\n            font-size: 15px;\n            color: #333;\n            overflow: hidden;\n            text-overflow:ellipsis;\n            white-space: nowrap;\n          }\n          .subtitle {\n            width: 100%;\n            max-height: 20px;\n            padding: 10px 0;\n            line-height: 25px;\n            font-size: 13px;\n            color: #999;\n            overflow: hidden;\n          }\n          .price {\n            color: @primary;\n            font-size: 16px;\n          }\n      }\n  }\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daocloud_j/git/loderunner-vue-front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/daocloud_j/git/loderunner-vue-front/src/views/Login.vue","mtime":1591819548000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/daocloud_j/git/loderunner-vue-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9TaW1wbGVIZWFkZXInCmltcG9ydCB7IGxvZ2luLCByZWdpc3RlciwgZ2V0VXNlckluZm8gfSBmcm9tICcuLi9zZXJ2aWNlL3VzZXInCmltcG9ydCB7IHNldExvY2FsLCBnZXRMb2NhbCB9IGZyb20gJ0AvY29tbW9uL2pzL3V0aWxzJwppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ3ZhbnQnCmltcG9ydCBWZXJpZnkgZnJvbSAndnVlMi12ZXJpZnknCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHVzZXJuYW1lMTogJycsCiAgICAgIHBhc3N3b3JkMTogJycsCiAgICAgIHR5cGU6ICdsb2dpbicsCiAgICAgIHZlcmlmeTogZmFsc2UKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHNIZWFkZXIsCiAgICBWZXJpZnkKICB9LAogIG1ldGhvZHM6IHsKICAgIGRlYWxUcmlWZXIoKSB7CiAgICAgIHRoaXMuJHJlZnMubG9naW5WZXJpZnlSZWYuJHJlZnMuaW5zdGFuY2UuY2hlY2tDb2RlKCkKICAgIH0sCiAgICB0b2dnbGUodikgewogICAgICB0aGlzLnZlcmlmeSA9IGZhbHNlCiAgICAgIHRoaXMudHlwZSA9IHYKICAgIH0sCiAgICBhc3luYyBvblN1Ym1pdCh2YWx1ZXMpIHsKICAgICAgdGhpcy5kZWFsVHJpVmVyKCkKICAgICAgaWYgKCF0aGlzLnZlcmlmeSkgewogICAgICAgIFRvYXN0LmZhaWwoJ+mqjOivgeeggeacquWhq+aIluWhq+WGmemUmeivryEnKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ2xvZ2luJykgewogICAgICAgIGNvbnN0IHsgZGF0YSwgcmVzdWx0Q29kZSB9ID0gYXdhaXQgbG9naW4oewogICAgICAgICAgImxvZ2luTmFtZSI6IHZhbHVlcy51c2VybmFtZSwKICAgICAgICAgICJwYXNzd29yZE1kNSI6IHRoaXMuJG1kNSh2YWx1ZXMucGFzc3dvcmQpCiAgICAgICAgfSkKICAgICAgICBzZXRMb2NhbCgndG9rZW4nLCBkYXRhKQogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCByZWdpc3Rlcih7CiAgICAgICAgICAibG9naW5OYW1lIjogdmFsdWVzLnVzZXJuYW1lMSwKICAgICAgICAgICJwYXNzd29yZCI6IHZhbHVlcy5wYXNzd29yZDEKICAgICAgICB9KQogICAgICAgIFRvYXN0LnN1Y2Nlc3MoJ+azqOWGjOaIkOWKnycpCiAgICAgICAgdGhpcy50eXBlID0gJ2xvZ2luJwogICAgICB9CiAgICB9LAogICAgc3VjY2VzcyhvYmopIHsKICAgICAgdGhpcy52ZXJpZnkgPSB0cnVlCiAgICAgIC8vIOWbnuiwg+S5i+WQju+8jOWIt+aWsOmqjOivgeeggQogICAgICBvYmoucmVmcmVzaCgpCiAgICB9LAogICAgZXJyb3Iob2JqKSB7CiAgICAgIHRoaXMudmVyaWZ5ID0gZmFsc2UKICAgICAgLy8g5Zue6LCD5LmL5ZCO77yM5Yi35paw6aqM6K+B56CBCiAgICAgIG9iai5yZWZyZXNoKCkKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"login\">\n    <s-header :name=\"type == 'login' ? '登录' : '注册'\" :back=\"'/home'\"></s-header>\n    <img class=\"logo\" src=\"//s.weituibao.com/1582958061265/mlogo.png\" alt=\"\">\n    <div v-if=\"type == 'login'\" class=\"login-body login\">\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username\"\n          name=\"username\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div class=\"verify\">\n          <Verify ref=\"loginVerifyRef\" @error=\"error\" :showButton=\"false\" @success=\"success\" :width=\"'100%'\" :height=\"'40px'\" :fontSize=\"'16px'\" :type=\"2\"></Verify>\n        </div>\n        <div style=\"margin: 16px;\">\n          <div class=\"link-register\" @click=\"toggle('register')\">立即注册</div>\n          <van-button round block type=\"info\" color=\"#1baeae\" native-type=\"submit\">登录</van-button>\n        </div>\n      </van-form>\n    </div>\n    <div v-else class=\"login-body register\">\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username1\"\n          name=\"username1\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password1\"\n          type=\"password\"\n          name=\"password1\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div class=\"verify\">\n          <Verify ref=\"loginVerifyRef\" @error=\"error\" :showButton=\"false\" @success=\"success\" :width=\"'100%'\" :height=\"'40px'\" :fontSize=\"'16px'\" :type=\"2\"></Verify>\n        </div>\n        <div style=\"margin: 16px;\">\n          <div class=\"link-login\" @click=\"toggle('login')\">已有登录账号</div>\n          <van-button round block type=\"info\" color=\"#1baeae\" native-type=\"submit\">注册</van-button>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport sHeader from '@/components/SimpleHeader'\nimport { login, register, getUserInfo } from '../service/user'\nimport { setLocal, getLocal } from '@/common/js/utils'\nimport { Toast } from 'vant'\nimport Verify from 'vue2-verify'\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      username1: '',\n      password1: '',\n      type: 'login',\n      verify: false\n    }\n  },\n  components: {\n    sHeader,\n    Verify\n  },\n  methods: {\n    dealTriVer() {\n      this.$refs.loginVerifyRef.$refs.instance.checkCode()\n    },\n    toggle(v) {\n      this.verify = false\n      this.type = v\n    },\n    async onSubmit(values) {\n      this.dealTriVer()\n      if (!this.verify) {\n        Toast.fail('验证码未填或填写错误!')\n        return\n      }\n      if (this.type == 'login') {\n        const { data, resultCode } = await login({\n          \"loginName\": values.username,\n          \"passwordMd5\": this.$md5(values.password)\n        })\n        setLocal('token', data)\n        window.location.href = '/'\n      } else {\n        const { data } = await register({\n          \"loginName\": values.username1,\n          \"password\": values.password1\n        })\n        Toast.success('注册成功')\n        this.type = 'login'\n      }\n    },\n    success(obj) {\n      this.verify = true\n      // 回调之后，刷新验证码\n      obj.refresh()\n    },\n    error(obj) {\n      this.verify = false\n      // 回调之后，刷新验证码\n      obj.refresh()\n    }\n  },\n}\n</script>\n\n<style lang=\"less\">\n  .login {\n    .logo {\n      width: 120px;\n      height: 120px;\n      display: block;\n      margin: 80px auto 0px;\n    }\n    .login-body {\n      padding: 0 20px;\n    }\n    .login {\n      .link-register {\n        font-size: 14px;\n        margin-bottom: 20px;\n        color: #1989fa;\n        display: inline-block;\n      }\n    }\n    .register {\n      .link-login {\n        font-size: 14px;\n        margin-bottom: 20px;\n        color: #1989fa;\n        display: inline-block;\n      }\n    }\n    .verify-bar-area {\n      margin-top: 24px;\n      .verify-left-bar {\n        border-color: #1baeae;\n      }\n      .verify-move-block {\n        background-color: #1baeae;\n        color: #fff;\n      }\n    }\n    .verify {\n      >div {\n        width: 100%;\n      }\n      display: flex;\n      justify-content: center;\n      .cerify-code-panel {\n        margin-top: 16px;\n      }\n      .verify-code {\n        width: 40%!important;\n        float: left!important;\n      }\n      .verify-code-area {\n        float: left!important;\n        width: 54%!important;\n        margin-left: 14px!important;\n        .varify-input-code {\n          width: 90px;\n          height: 38px!important;\n          border: 1px solid #e9e9e9;\n          padding-left: 10px;\n          font-size: 16px;\n        }\n        .verify-change-area {\n          line-height: 44px;\n        }\n      }\n    }\n  }\n</style>\n"]}]}